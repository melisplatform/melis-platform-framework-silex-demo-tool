$(function(){var e=$("body");e.on("click","#meliscodeexamplesilex_tool_new_album",function(){melisCoreTool.pending("button#meliscodeexamplesilex_tool_new_album");melisHelper.createModal(null,null,!1,[],"/melis/silex-album-form",function(){melisCoreTool.done("button#meliscodeexamplesilex_tool_new_album")})}),e.on("submit","form#melis_silex_album_form",function(e){var l="form#"+$(this).attr("id"),o=$(this).serializeArray();$(l+" input, button").not("input#alb_id").attr("disabled","disabled"),$.ajax({type:"POST",url:"/melis/silex-save-album",data:$.param(o),dataType:"json",encode:!0}).done(function(e){e.success?($("#silexDemoToolAlbumTable").DataTable().ajax.reload(),$(".modal").modal("hide"),melisHelper.zoneReload("id_melisplatformsilexdemotool_content","MelisPlatformFrameworkSilexDemoTool_content"),melisHelper.melisOkNotification(e.title,e.message)):(melisHelper.melisKoNotification(e.title,e.message,e.errors,0),melisCoreTool.highlightErrors(e.success,e.errors,"melis_silex_album_form")),$(l+" input, button").not("input#alb_id").removeAttr("disabled"),melisCore.flashMessenger()}).fail(function(){alert(translations.tr_meliscore_error_message)}),e.preventDefault()}),e.on("click",".btn_meliscodeexamplesilex_delete",function(){melisCoreTool.pending("button.btn_meliscodeexamplesilex_delete");var e=$(this).closest("tr").attr("id");melisCoreTool.confirm(translations.tr_meliscore_common_yes,translations.tr_meliscore_common_no,translations.tr_melisplatformsilexdemotool_plugin_name,translations.tr_meliscodeexamplesilex_album_delete_confirm,function(){$.ajax({type:"POST",url:"/melis/silex-delete-album",data:{id:e},dataType:"json",encode:!0}).done(function(e){e.success?($("#silexDemoToolAlbumTable").DataTable().ajax.reload(),melisHelper.melisOkNotification(e.title,e.message),melisHelper.zoneReload("id_melisplatformsilexdemotool_content","MelisPlatformFrameworkSilexDemoTool_content")):melisHelper.melisKoNotification(e.title,e.message,[],0),melisCore.flashMessenger()}).fail(function(){alert(translations.tr_meliscore_error_message)})}),melisCoreTool.done("button.btn_meliscodeexamplesilex_delete")}),e.on("click",".btn_meliscodeexamplesilex_edit",function(){melisCoreTool.pending("button.btn_meliscodeexamplesilex_edit");var e=$(this).closest("tr").attr("id");$.ajax({type:"POST",url:"/melis/silex-edit-album",data:{id:e},dataType:"json",encode:!0}).done(function(e){if(e.success){melisHelper.createModal(null,null,!1,e.album,"/melis/silex-album-form",function(){melisCoreTool.done("button.btn_meliscodeexamplesilex_edit")})}}).fail(function(){alert(translations.tr_meliscore_error_message)})}),e.on("click",".silexDemoToolAlbumTableRefreshBtn",function(){$("#silexDemoToolAlbumTable").DataTable().ajax.reload(),melisHelper.zoneReload("id_melisplatformsilexdemotool_content","MelisPlatformFrameworkSilexDemoTool_content")})});